import { MpZ } from '../mp';
import { assertSame } from './assertions';

function fact(n: u32): MpZ {
  let a = MpZ.from(1);
  for (let i: u32 = 1; i <= n; ++i) {
    a *= MpZ.from(i);
  }
  return a;
}

describe('fact', () => {
  it('retrun correct results', () => {
    assertSame(fact(0), MpZ.from(1));
    assertSame(fact(1), MpZ.from(1));
    assertSame(fact(2), MpZ.from(2));
    assertSame(fact(3), MpZ.from(6));

    assertSame(
      fact(100),
      '93326215443944152681699238856266700490715968264381621468592963895217599993229915608941463976156518286253697920827223758251185210916864000000000000000000000000',
    );
    assertSame(fact(100) / fact(99), 100);
    assertSame(fact(1000) / fact(999), 1000);

    assertSame(
      fact(100) / fact(9),
      '257182031095525112107857249934597388918419224714455526533820998388496472644482792132224051962512451185663850090463028434334174412800000000000000000000000',
    );
    assertSame(
      fact(1000) / fact(500),
      '329788636409885371220242520701162617069964856979816928189859032090942479717817520517762864144282860642511610038896581182026805940691096457163819146404867449323195951016063077387633734854267300606090269861265477271286488576761297484044021454635363397236388600521295263570193996353801020289037482628493201848961418121619819772764993033522996635864344333906429575480132415225196248339593869027449698810760918514647597480713398046665485357617383939595208066363445344114949740210480721402476538003489320643962503978159438679308830234034782545381994664487532357468065201295553689118295945581602629007720957929180752212770840487049163879535858780678097564405860520561251708337074514204325431100590616437619493225353351385282389526327254303162475735005096296377910576440110923510611478455640616892001930824134879251166941326675998088653284459628349959991040037803289845575791602454929778448873072964281350714756584208225937046706839777918383449205581955131192577936383783696093755727532986792258013308284866421680502348502137582409888931707193522417988009028652278091249663021542543131557667939046775828857498243505708092885140538311156118607423712339447052595796169409094245071458170610310022757008405846321265492283219335864399905370457791539340714797690375415057559712073706121243182307015204282485816648002227404800000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000',
    );
  });
});
