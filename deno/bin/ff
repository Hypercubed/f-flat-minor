#!/usr/bin/env -S deno -q run --allow-net --allow-read --unstable

const args = Deno.args.filter((arg) => !arg.startsWith('-'));

switch (Deno.args[0] || 'repl') {
  case 'compile': {
    (await import('./ff-compile.ts')).compile(args[1]);
    break;
  }
  case 'execute': {
    (await import('./ff-execute.ts')).execute(args[1]);
    break;
  }
  case 'run': {
    (await import('./ff-run.ts')).run(args[1]);
    break;
  }
  case 'repl': {
    const { repl } = await import('./ff-repl.ts');
    await repl();
    break;
  }
  default:
    throw new Error('Unknown command');
}