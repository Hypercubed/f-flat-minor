# f-flat-minor

f-flat-minor is a tiny toy language and baby brother to [f-flat](https://github.com/Hypercubed/f-flat_node#readme).  It is meant to be a tiny stack-oriented language used for learning new languages.  The challenge is to implement f-flat-minor in as many languages as possible within the rules listed below.
## Rules

* Minimal dependencies (try to limit to the standard library for each language)
* Parsing should be as simple as splitting on whitespace.
* The stack should consist of only big integers.
* Each implementation should generate and execute the same bytecode.
* Each implementation should generate the same output.

## The Language

Each implementation should compile and execute the following code:

```forth
/* common definitions */

--: 1 - ;
not: 0 = ;
rot: &swap dip swap ;
choose: &swap ? drop ;
ifte: rot choose call ;

/* factorial */

fact_t: drop 1 ;
fact_f: dup -- fact * ;
fact: dup &fact_t &fact_f ifte ;

/* string printing */

print_f: putc print ;
print: dup &drop &print_f ifte ;
println: print 10 putc ;

0 32 'Factorial print
0 '100: println

100 fact .
```

with the following output:

```
Factorial 100:
[93326215443944152681699238856266700490715968264381621468592963895217599993229915608941463976156518286253697920827223758251185210916864000000000000000000000000]
```

## Phased Approach

For each target language first implement a proof-of-concept in an online code runner ([replit](replit.com/) for example).  Then, if satisfied, split the POC into a compiler and runner within this repo.

## Progress

| Language | POC | Compiler | Interpreter | REPL |
| --- | ----------- | --- | --- | --- |
| Typescript/Deno | [ ðŸ˜€  Replit ](https://replit.com/@Hypercubed/f-flat-minor-TS) | âœ” | âœ” | âœ” |
| Go | [ ðŸ˜€  Replit ](https://replit.com/@Hypercubed/f-flat-minor-Go) | âœ” | âœ” |
| Rust | [ ðŸ˜”  Replit ](https://replit.com/@Hypercubed/f-flat-minor-Rust) |
| Python | [ ðŸ˜€  Replit ](https://replit.com/@Hypercubed/f-flat-minor-Python) |
| Ruby | [ ðŸ˜€  Replit ](https://replit.com/@Hypercubed/f-flat-minor-Ruby) |
| Dart | [ ðŸ˜€  Replit ](https://replit.com/@Hypercubed/f-flat-minor-Dart) |
| AssemblyScript | [ ðŸ˜€ ](https://www.assemblyscript.org/editor.html#IyFvcHRpbWl6ZT1zcGVlZCZydW50aW1lPXN0dWIKLy8gaW1wb3J0ICJ3YXNpIjsKCnR5cGUgQmFzZSA9IGk2NDsKCmNvbnN0IHN0YWNrOiBCYXNlW10gPSBbXTsKCmNvbnN0IHN5bWJvbHMgPSBuZXcgTWFwPHN0cmluZywgQmFzZT4oKTsKY29uc3QgY29yZV9kZWZzID0gbmV3IE1hcDxCYXNlLCAoKSA9PiB2b2lkPigpOwpjb25zdCB1c2VyX2RlZnMgPSBuZXcgTWFwPEJhc2UsIHN0cmluZ1tdPigpOwoKZnVuY3Rpb24gcGVlaygpOiBCYXNlIHsKICBpZiAoc3RhY2subGVuZ3RoID09PSAwKSB7CiAgICB0aHJvdyAnZXJyJzsKICB9CiAgcmV0dXJuIHN0YWNrW3N0YWNrLmxlbmd0aCAtIDFdIGFzIEJhc2U7Cn0KCmZ1bmN0aW9uIHBvcCgpOiBCYXNlIHsKICBpZiAoc3RhY2subGVuZ3RoID09PSAwKSB7CiAgICB0aHJvdyAnZXJyJzsKICB9CiAgcmV0dXJuIHN0YWNrLnBvcCgpIGFzIEJhc2U7Cn0KCi8vIGludGVycHJldG9yCmxldCBfbmV4dENvZGUgPSAwOwoKZnVuY3Rpb24gbmV4dENvZGUoKTogQmFzZSB7CiAgcmV0dXJuIF9uZXh0Q29kZSsrOwp9CgpmdW5jdGlvbiBnZXRTeW1ib2wobmFtZTogc3RyaW5nKTogQmFzZSB7CiAgbmFtZSA9IG5hbWUudG9Mb3dlckNhc2UoKTsKICBpZiAoIXN5bWJvbHMuaGFzKG5hbWUpKSB7CiAgICBjb25zdCBjb2RlID0gbmV4dENvZGUoKTsKICAgIHN5bWJvbHMuc2V0KG5hbWUsIGNvZGUpOwogIH0KICByZXR1cm4gc3ltYm9scy5nZXQobmFtZSk7Cn0KCmZ1bmN0aW9uIGRlZmluZUNvcmUobmFtZTogc3RyaW5nLCBmbjogKCkgPT4gdm9pZCk6IHZvaWQgewogIGNvbnN0IGNvZGUgPSBnZXRTeW1ib2wobmFtZSk7CiAgY29yZV9kZWZzLnNldChjb2RlLCBmbik7Cn0KCmZ1bmN0aW9uIGNhbGxPcChjb2RlOiBCYXNlKTogdm9pZCB7CiAgaWYgKGNvcmVfZGVmcy5oYXMoY29kZSkpIHsKICAgIHJldHVybiBjb3JlX2RlZnMuZ2V0KGNvZGUpKCk7CiAgfQogIGlmICh1c2VyX2RlZnMuaGFzKGNvZGUpKSB7CiAgICByZXR1cm4gZXYodXNlcl9kZWZzLmdldChjb2RlKSk7CiAgfQogIHRocm93ICdlcnInOwp9CgpmdW5jdGlvbiBzZXR1cCgpOiB2b2lkIHsKICBkZWZpbmVDb3JlKCdub3AnLCAoKSA9PiB7fSk7CgogIGRlZmluZUNvcmUoJ2NscycsICgpID0+IHsKICAgIHN0YWNrLnNwbGljZSgwLCBzdGFjay5sZW5ndGgpOwogIH0pOwoKICBkZWZpbmVDb3JlKCdjYWxsJywgKCkgPT4gezsKICAgIGNhbGxPcChwb3AoKSk7CiAgfSk7CgogIGRlZmluZUNvcmUoJy4nLCAoKSA9PiB7ICAvLyBwcmludCBzdGFjawogICAgbG9nKGBbJHtzdGFja31dYCk7CiAgfSk7CgogIGRlZmluZUNvcmUoJ3B1dGMnLCAoKSA9PiB7CiAgICBvdXRwdXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShwb3AoKSBhcyBpMzIpOwogIH0pOwoKIGRlZmluZUNvcmUoJ2Ryb3AnLCAoKSA9PiBzdGFjay5wb3AoKSk7CgogIGRlZmluZUNvcmUoJ3N3YXAnLCAoKSA9PiB7ICAvLyBzd2FwCiAgICBjb25zdCBhID0gcG9wKCk7CiAgICBjb25zdCBiID0gcG9wKCk7CiAgICBzdGFjay5wdXNoKGEpOwogICAgc3RhY2sucHVzaChiKTsKICB9KTsKCiAgZGVmaW5lQ29yZSgnZHVwJywgKCkgPT4gewogICAgc3RhY2sucHVzaChwZWVrKCkpOwogIH0pOwoKICBkZWZpbmVDb3JlKCcrJywgKCkgPT4gewogICAgY29uc3QgYSA9IHBvcCgpOwogICAgc3RhY2tbc3RhY2subGVuZ3RoIC0gMV0gKz0gYTsKICB9KTsKCiAgZGVmaW5lQ29yZSgnLScsICgpID0+IHsKICAgIGNvbnN0IGEgPSBwb3AoKTsKICAgIHN0YWNrW3N0YWNrLmxlbmd0aCAtIDFdIC09IGE7CiAgfSk7CgogIGRlZmluZUNvcmUoJyonLCAoKSA9PiB7CiAgICBjb25zdCBhID0gcG9wKCk7CiAgICBzdGFja1tzdGFjay5sZW5ndGggLSAxXSAqPSBhOwogIH0pOwoKICBkZWZpbmVDb3JlKCcvJywgKCkgPT4gewogICAgY29uc3QgYSA9IHBvcCgpOwogICAgc3RhY2tbc3RhY2subGVuZ3RoIC0gMV0gLz0gYTsKICB9KTsKCiAgZGVmaW5lQ29yZSgnPScsICgpID0+IHsKICAgIHN0YWNrLnB1c2gocG9wKCkgPT09IHBvcCgpID8gMSA6IDApOwogIH0pOwoKICBkZWZpbmVDb3JlKCc/JywgKCkgPT4gewogICAgY29uc3QgdCA9IHBvcCgpOwogICAgaWYgKHBvcCgpICE9PSAwKSB7CiAgICAgIGNhbGxPcCh0KTsKICAgIH0KICB9KTsKCiAgZGVmaW5lQ29yZSgnZGlwJywgKCkgPT4gewogICAgY29uc3QgYSA9IHBvcCgpCiAgICBjb25zdCBiID0gcG9wKCkKICAgIGNhbGxPcChhKQogICAgc3RhY2sucHVzaChiKTsKICB9KTsKfQoKZnVuY3Rpb24gZXYodG9rZW5zOiBzdHJpbmdbXSk6IHZvaWQgewogIGxldCBpID0gMDsKICBjb25zdCBsID0gdG9rZW5zLmxlbmd0aDsKICBsZXQgdG9rZW4gPSAnJzsKICB3aGlsZSAoaSA8IGwpIHsKICAgIHRva2VuID0gdG9rZW5zW2krK107CgogICAgaWYgKCFpc05hTihwYXJzZUludCh0b2tlbikpKSB7CiAgICAgIHN0YWNrLnB1c2goSTY0LnBhcnNlSW50KHRva2VuLCAxMCkpOwogICAgfSBlbHNlIGlmICh0b2tlbi5zdGFydHNXaXRoKCdcJycpKSB7IC8vIFN0cmluZwogICAgICB0b2tlbi5yZXBsYWNlKCdcJycsICcnKQogICAgICAgIC5zcGxpdCgnJykKICAgICAgICAucmV2ZXJzZSgpCiAgICAgICAgLmZvckVhY2goYyA9PiBzdGFjay5wdXNoKGMuY2hhckNvZGVBdCgwKSkpOwogICAgfSBlbHNlIGlmICh0b2tlbi5zdGFydHNXaXRoKCcmJykpIHsgLy8gU3ltYm9sCiAgICAgIGNvbnN0IG5hbWUgPSB0b2tlbi5yZXBsYWNlKCcmJywgJycpOwogICAgICBzdGFjay5wdXNoKGdldFN5bWJvbChuYW1lKSk7CiAgICB9IGVsc2UgaWYgKHN5bWJvbHMuaGFzKHRva2VuKSkgIHsgIC8vIERlZmludGl0aW9uCiAgICAgIGNvbnN0IGNvZGUgPSBzeW1ib2xzLmdldCh0b2tlbik7CiAgICAgIGNhbGxPcChjb2RlKTsKICAgIH0gZWxzZSBpZiAodG9rZW4uZW5kc1dpdGgoJzonKSkgeyAvLyBEZWZpbnRpdGlvbgogICAgICBjb25zdCBuYW1lID0gdG9rZW4ucmVwbGFjZSgnOicsICcnKTsKICAgICAgbGV0IGNvZGUgPSBnZXRTeW1ib2wobmFtZSk7CiAgICAgIHRva2VuID0gdG9rZW5zW2krK107CiAgICAgIGxldCBkZWY6IHN0cmluZ1tdID0gW107CiAgICAgIHdoaWxlICh0b2tlbiAhPSAnOycgJiYgaSA8IGwpIHsKICAgICAgICBkZWYucHVzaCh0b2tlbik7CiAgICAgICAgdG9rZW4gPSB0b2tlbnNbaSsrXTsKICAgICAgfQogICAgICB1c2VyX2RlZnMuc2V0KGNvZGUsIGRlZik7CiAgICB9IGVsc2UgaWYgKHRva2VuLnN0YXJ0c1dpdGgoJy8qJykpIHsgIC8vIENvbW1lbnQKICAgICAgd2hpbGUgKCF0b2tlbi5lbmRzV2l0aCgnKi8nKSAmJiBpIDwgdG9rZW5zLmxlbmd0aCkgewogICAgICAgIHRva2VuID0gdG9rZW5zW2krK107CiAgICAgIH0KICAgIH0gZWxzZSB7CiAgICAgIHRocm93IG5ldyBFcnJvcihgVW5kZWZpbmVkICR7dG9rZW59YCk7CiAgICB9CiAgfQp9CgpmdW5jdGlvbiB0b2tlbml6ZShzOiBzdHJpbmcpOiBzdHJpbmdbXSB7CiAgcmV0dXJuIHMuc3BsaXQoJyAnKQogICAgLm1hcDxzdHJpbmc+KHMgPT4gcy50cmltKCkpCiAgICAuZmlsdGVyKHMgPT4gcyAhPT0gJycpOwp9CgpsZXQgb3V0cHV0ID0gJyc7CgpmdW5jdGlvbiBsb2cobGluZTogc3RyaW5nKTogdm9pZCB7CiAgb3V0cHV0ICs9IGxpbmUgKyAnXG4nOwp9CgpleHBvcnQgZnVuY3Rpb24gbWFpbigpOiBzdHJpbmcgewogIHNldHVwKCk7CgogIGV2KHRva2VuaXplKGAKICAKICAgIC8qIGNvbW1vbiBkZWZpbml0aW9ucyAqLwogICAgLS06IDEgLSA7CiAgICBub3Q6IDAgPSA7CiAgICByb3Q6ICZzd2FwIGRpcCBzd2FwIDsKICAgIGNob29zZTogJnN3YXAgPyBkcm9wIDsKICAgIGlmdGU6IHJvdCBjaG9vc2UgY2FsbCA7CgogICAgLyogZmFjdG9yaWFsICovCiAgICBmYWN0X3Q6IGRyb3AgMSA7CiAgICBmYWN0X2Y6IGR1cCAtLSBmYWN0ICogOwogICAgZmFjdDogZHVwICZmYWN0X3QgJmZhY3RfZiBpZnRlIDsKCiAgICAvKiBzdHJpbmcgcHJpbnRpbmcgKi8KICAgIHByaW50X2Y6IHB1dGMgcHJpbnQgOwogICAgcHJpbnQ6IGR1cCAmZHJvcCAmcHJpbnRfZiBpZnRlIDsKICAgIHByaW50bG46IHByaW50IDEwIHB1dGMgOwoKICAgIDAgMzIgJ0ZhY3RvcmlhbCBwcmludAogICAgMCAnMTU6IHByaW50bG4KCiAgICAxNSBmYWN0IC4KICAKICBgKSk7CgogIHJldHVybiBvdXRwdXQ7Cn0KIyFodG1sCjx0ZXh0YXJlYSBpZD0ib3V0cHV0IiBzdHlsZT0iaGVpZ2h0OiAxMDAlOyB3aWR0aDogMTAwJSIgcmVhZG9ubHk+PC90ZXh0YXJlYT4KPHNjcmlwdD4KbG9hZGVyLmluc3RhbnRpYXRlKG1vZHVsZV93YXNtLCB7IC8qIGltcG9ydHMgKi8gfSkKICAudGhlbigoeyBleHBvcnRzIH0pID0+IHsKICAgIGNvbnNvbGUubG9nKGV4cG9ydHMuX19nZXRTdHJpbmcoZXhwb3J0cy5tYWluKCkpKTsKICB9KQo8L3NjcmlwdD4=) |
| C/C++/C#/LLVM |
| Lisp/Clojure/Racket |
| Haskell |
| Julia |
| Erlang/BEAM |
| Perl/Raku |

## License

This project is licensed under the MIT License - see the LICENSE file for details
